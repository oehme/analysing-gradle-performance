//Mockup of a typical script that determines the current version from the output of a git command

def out = new ByteArrayOutputStream()
exec {
  if (System.getProperty('os.name').contains('windows')) {
    commandLine 'cmd', '/c', 'git', 'rev-parse', "HEAD"
  } else {
    commandLine 'git', 'rev-parse', "HEAD"
  }
  standardOutput = out
  workingDir = rootDir
}

version = new String(out.toByteArray())
